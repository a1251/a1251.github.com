/**
 * Created by Xiao on 2016/12/28.
 */

var data = [
    {
        id: 1,
        cate: '分类1',
        name: '名称1',
        suport: '运营商1',
        description: '描述1'
    },
    {
        id: 2,
        cate: '分类2',
        name: '名称2',
        suport: '运营商2',
        description: '描述2'
    },
    {
        id: 3,
        cate: '分类3',
        name: '名称3',
        suport: '运营商3',
        description: '描述3'
    },
    {
        id: 4,
        cate: '分类4',
        name: '名称4',
        suport: '运营商4',
        description: '描述4'
    },
    {
        id: 5,
        cate: '分类5',
        name: '名称5',
        suport: '运营商5',
        description: '描述5'
    },
    {
        id: 6,
        cate: '分类6',
        name: '名称6',
        suport: '运营商6',
        description: '描述6'
    },
    {
        id: 7,
        cate: '分类7',
        name: '名称7',
        suport: '运营商7',
        description: '描述7'
    },
    {
        id: 8,
        cate: '分类8',
        name: '名称8',
        suport: '运营商8',
        description: '描述8'
    },
    {
        id: 9,
        cate: '分类9',
        name: '名称9',
        suport: '运营商9',
        description: '描述9'
    },
    {
        id: 10,
        cate: '分类10',
        name: '名称10',
        suport: '运营商10',
        description: '描述10'
    },
    {
        id: 11,
        cate: '分类11',
        name: '名称11',
        suport: '运营商11',
        description: '描述11'
    },
    {
        id: 12,
        cate: '分类12',
        name: '名称12',
        suport: '运营商12',
        description: '描述12'
    },
    {
        id: 13,
        cate: '分类13',
        name: '名称13',
        suport: '运营商13',
        description: '描述13'
    },
    {
        id: 14,
        cate: '分类14',
        name: '名称14',
        suport: '运营商14',
        description: '描述14'
    },
    {
        id: 15,
        cate: '分类15',
        name: '名称15',
        suport: '运营商15',
        description: '描述15'
    },
    {
        id: 16,
        cate: '分类16',
        name: '名称16',
        suport: '运营商16',
        description: '描述16'
    },
    {
        id: 17,
        cate: '分类17',
        name: '名称17',
        suport: '运营商17',
        description: '描述17'
    },
    {
        id: 18,
        cate: '分类18',
        name: '名称18',
        suport: '运营商18',
        description: '描述18'
    },
    {
        id: 19,
        cate: '分类19',
        name: '名称19',
        suport: '运营商19',
        description: '描述19'
    },
    {
        id: 20,
        cate: '分类20',
        name: '名称20',
        suport: '运营商20',
        description: '描述20'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    },
    {
        id: 21,
        cate: '分类21',
        name: '名称21',
        suport: '运营商21',
        description: '描述21'
    },
    {
        id: 22,
        cate: '分类22',
        name: '名称22',
        suport: '运营商22',
        description: '描述22'
    },
    {
        id: 23,
        cate: '分类23',
        name: '名称23',
        suport: '运营商23',
        description: '描述23'
    },
    {
        id: 24,
        cate: '分类24',
        name: '名称24',
        suport: '运营商24',
        description: '描述24'
    },
    {
        id: 25,
        cate: '分类25',
        name: '名称25',
        suport: '运营商25',
        description: '描述25'
    },
    {
        id: 26,
        cate: '分类26',
        name: '名称26',
        suport: '运营商26',
        description: '描述26'
    },
    {
        id: 27,
        cate: '分类27',
        name: '名称27',
        suport: '运营商27',
        description: '描述27'
    },
    {
        id: 28,
        cate: '分类28',
        name: '名称28',
        suport: '运营商28',
        description: '描述28'
    },
    {
        id: 29,
        cate: '分类29',
        name: '名称29',
        suport: '运营商29',
        description: '描述29'
    },
    {
        id: 30,
        cate: '分类30',
        name: '名称30',
        suport: '运营商30',
        description: '描述30'
    }
];

$(function () {
    var toolDel = $("#toolDelete");
    var toolAdd = $("#toolAdd");
    var table = $("#table");
    toolDel.click(function () {
        var checked = $("input[type='checkbox']:checked");
        if(checked.length != 6){
            console.log(checked.length);
            if(confirm("确定删除所有选中行？")){
                //checked.parent().parent("tr").remove();
                var ids = $.map(table.bootstrapTable('getSelections'), function (row) {
                    return row.id;
                });
                table.bootstrapTable('remove',{
                    field:'id',
                    values: ids
                })
            }
        }else{
            alert("当前未选中任何数据！");
        }
    });
    $("#addSubmit").click(function () {
        //var addID = $("input[name='addId']").val();
        var addID = Math.floor(Math.random()*100);
        var addCate = $("input[name='addCate']").val();
        var addName = $("input[name='addName']").val();
        var addSuport = $("input[name='addSuport']").val();
        var addDesc = $("input[name='addDesc']").val();
        table.bootstrapTable('insertRow',{
            index: 1,
            row: {
                id: addID,
                cate: addCate,
                name: addName,
                suport: addSuport,
                description: addDesc
            }
        });
        $("#addModal").removeClass("in");
    });
    $("#toolEdit").click(function () {
        var rowdata = table.bootstrapTable('getSelections');
            //var rowData = {
            //    id: row.id,
            //    cate: row.cate,
            //    name: row.name,
            //    suport: row.suport,
            //    description: row.description
            //}
        //    return row.cate;
        //);
        //alert("test");
        //console.log(rowdata[0].index);
        $("input[name=editId]").val(rowdata[0].id);
        $("input[name=editCate]").val(rowdata[0].cate);
        $("input[name=editName]").val(rowdata[0].name);
        $("input[name=editSuport]").val(rowdata[0].suport);
        $("input[name=editDesc]").val(rowdata[0].description);
    });
    $("#editSubmit").click(function () {
        var checked = $("input[type='checkbox']:checked");
        var editID = $("input[name=editId]").val();
        var editCate = $("input[name=editCate]").val();
        var editName = $("input[name=editName]").val();
        var editSuport = $("input[name=editSuport]").val();
        var editDesc = $("input[name=editDesc]").val();
        var thisIndex = checked.parent().parent("tr").index();
        //console.log(thisIndex);
        table.bootstrapTable('updateRow',{
            index: thisIndex,
            row:{
                id: editID,
                cate: editCate,
                name: editName,
                suport: editSuport,
                description: editDesc
            }
        });
        $("#editModal").removeClass("in");//关闭弹窗
    });
    $(".showDetail").click(function(){
       //var id = $.map(table.bootstrapTable('getSelection'), function (row) {
       //    return row.id;
       //}) ;
        $("#idDetail").html(rowdata[0].id);
        $("#cateDetail").html(rowdata[0].cate);
        $("#nameDetail").html(rowdata[0].name);
        $("#suportDetail").html(rowdata[0].suport);
        $("#descDetail").html(rowdata[0].description);
    });
    $('#table').bootstrapTable({
        data: data,
            toolbar: '#toolbar',
            striped: false,
            cache: false,
            pagination: true,//是否显示分页
            paginationPreText: '上一页',
            paginationNextText:'下一页',
            sortable: true,//是否启用排序
            sortOrder: 'asc',//排序方式
            sidePagination: 'client',//分页方式，client，server
            pageNumber: 1,//初始化加载第一页，默认第一页
            pageSize: 10,//每页记录函数
            //pageList: [5,10,15,20],//可供选择的每页行数
            search: true,//是否显示表格搜索，次搜索是客户端搜索
            strictSearch: false,//严格搜索
            //searchOnEnterKey: true,//按下回车键之后才进行搜索
            formatter: '',
            showColumns: true,//是否显示所有列
            showRefresh: true,//是否显示刷新按钮
            minimumCountColumns: 3,  //最少允许列数
            clickToSelect: true,//是否启用点击选中行
            //height: 500,
            uniqueId: 'ID', //每一行的唯一标识
            showToggle: true,//食肉显示详细视图和列表视图的切换按钮
            cardView: false,//是否显示详细视图
            detailView: false,//是否显示父子表
            buttonsClass: 'warning',
            showExport: true,
            icon: {
                refresh: 'mif-search'
            },
            columns:[{
               checkbox: true
            }, {
                field: 'id',
                title: '编号'
            }, {
                field: 'cate',
                title: '分类',
                editable: 'true',
            }, {
                field: 'name',
                title: '名称'
            }, {
                field: 'suport',
                title: '支持运营商'
            },{
                field: 'description',
                title: '描述'
            },{
                field: 'operation',
                formatter: '<a href="#" class="showDetail" data-toggle="modal" data-target="#detailModal">查看详情</a>',
                title: '操作'
            }]
    });
    //2.初始化Button的点击事件
    //var oButtonInit = new ButtonInit();
    //oButtonInit.Init();
    //
    //var ButtonInit = function () {
    //    var oInit = new Object();
    //
    //    oInit.Init = function () {
    //        $("#search-txt").bootstrapTable('search');
    //        $("#myrefresh").bootstrapTable('refresh')
    //    };
    //
    //    return oInit;
    //};
});
